<!--
  Generated template for the EventDetailPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar>
    <ion-title>Meetup Info</ion-title>
    <ion-buttons end>
      <button
        ion-button
        icon-only
        (click)="likeEvent()">
        <ion-icon name="star-outline"></ion-icon>
      </button>
      <button
        ion-button
        icon-only
        full
        (click)="unlikeEvent()">
        <ion-icon name="star"></ion-icon>
      </button>
    </ion-buttons>
  </ion-navbar>

</ion-header>


<ion-content no-padding>

  <div class="upper-info">

    <ion-grid>
      <ion-row>
        <ion-col col-3 class="group-image-container">
          <preload-image class="group-image" [ratio]="{w:4,h:3}" [src]="event.group.keyPhoto.thumb_link" title="Group Photo"></preload-image>
        </ion-col>
        <ion-col col-9>
          <ion-row>
            <ion-col class="group-name" no-padding>{{event.group.name}}</ion-col>
          </ion-row>
          <ion-row>
            <ion-col class="group-location" no-padding>{{event.group.location}}</ion-col>
          </ion-row>
        </ion-col>
      </ion-row>
    </ion-grid>

    <div class="meetup-title">{{ event.eventName }}</div>

    <hr>
    <button
      class="rsvp-button"
      ion-button
      block
      (click)="joinAndRSVP()">JOIN AND RSVP</button>
    <hr>

    <ion-grid class="important-info">
      <ion-row>
        <ion-col col-1><ion-icon name="calendar"></ion-icon></ion-col>
        <ion-col class="date-info">
          <ion-row><ion-col>{{ event.timeInfo.day }}, {{ event.timeInfo.month }} {{ event.timeInfo.date }}</ion-col></ion-row>
          <ion-row><ion-col>{{ event.timeInfo.startTime }} - {{ event.timeInfo.endTime }}</ion-col></ion-row>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col col-1><ion-icon name="pin"></ion-icon></ion-col>
        <ion-col class="address-info">
          <ion-row>
            <ion-col>{{ event.venue.name }}</ion-col>
          </ion-row>
          <ion-row>
            <ion-col>{{ event.venue.location.address_1 }}, {{ event.venue.city }} {{ event.venue.zip }}</ion-col>
          </ion-row>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col col-1><ion-icon name="person"></ion-icon></ion-col>
        <ion-col class="host-info">{{ event.host }}</ion-col>
      </ion-row>
      <ion-row>
        <ion-col class="going-info">{{ event.yesRSVPCount }} people are going</ion-col>
      </ion-row>
      <ion-row>
        <ion-col class="going-pics">Pics of ppl going go here</ion-col>
      </ion-row>
    </ion-grid>
  </div>

  <preload-image [ratio]="{w:2, h:1}" [src]="event.featurePhoto.photo_link" title="featured_photo"></preload-image>

  <div class="description-text">
    <div [innerHtml]="event.description"></div>
    <div *ngIf="event.howToFindUs">
      <h6>How to find us.</h6>
      <p>{{ event.howToFindUs }}</p>
    </div>
  </div>
  <!-- this creates a google map on the page with the given lat/lng from -->
  <!-- the component as the initial center of the map: -->
  <agm-map [zoom]="mapOptions.zoom" [latitude]="event.venue.lat" [longitude]="event.venue.lon">
    <agm-marker [latitude]="event.venue.lat" [longitude]="event.venue.lon"></agm-marker>
  </agm-map>
</ion-content>
